# é‡åŒ–é‡‘è AI åˆ†æç³»ç»Ÿå®Œæ•´æ–¹æ¡ˆ

> **ç‰ˆæœ¬**: v1.0
> **æ›´æ–°æ—¶é—´**: 2025-01-03
> **ä½œè€…**: Claude Code + Happy
> **æ–‡æ¡£ç›®çš„**: åŸºäº Dify + Anki çš„æ™ºèƒ½é‡åŒ–é‡‘èåˆ†æç³»ç»Ÿæ¶æ„ä¸å®ç°æŒ‡å—

---

## ğŸ“‘ ç›®å½•

- [ç³»ç»Ÿæ¦‚è¿°](#ç³»ç»Ÿæ¦‚è¿°)
- [æŠ€æœ¯æ¶æ„](#æŠ€æœ¯æ¶æ„)
- [æ ¸å¿ƒåŠŸèƒ½æ¨¡å—](#æ ¸å¿ƒåŠŸèƒ½æ¨¡å—)
- [å·¥ä½œæµè®¾è®¡](#å·¥ä½œæµè®¾è®¡)
- [æ¨¡å‹é…ç½®](#æ¨¡å‹é…ç½®)
- [æ•°æ®é›†æˆ](#æ•°æ®é›†æˆ)
- [éƒ¨ç½²æŒ‡å—](#éƒ¨ç½²æŒ‡å—)
- [ä½¿ç”¨åœºæ™¯](#ä½¿ç”¨åœºæ™¯)
- [æˆæœ¬åˆ†æ](#æˆæœ¬åˆ†æ)
- [æœ€ä½³å®è·µ](#æœ€ä½³å®è·µ)
- [è¿›é˜¶åŠŸèƒ½](#è¿›é˜¶åŠŸèƒ½)

---

## ç³»ç»Ÿæ¦‚è¿°

### æ ¸å¿ƒç†å¿µ

```
å¤šæºæ•°æ®è¾“å…¥ â†’ AI æ™ºèƒ½åˆ†æ â†’ ç­–ç•¥ç”Ÿæˆä¸å›æµ‹ â†’ é£é™©è¯„ä¼° â†’ çŸ¥è¯†æ²‰æ·€
```

### ç³»ç»Ÿç‰¹æ€§

- âœ… **å¤šæ¨¡æ€å¸‚åœºåˆ†æ**ï¼šKçº¿å›¾ã€è´¢åŠ¡æŠ¥è¡¨ã€æ–°é—»å›¾ç‰‡çš„æ™ºèƒ½è¯†åˆ«
- âœ… **æ•°å­¦å»ºæ¨¡ä¸“å®¶**ï¼šæœŸæƒå®šä»·ã€é£é™©æ¨¡å‹ã€ç»Ÿè®¡æ£€éªŒçš„è‡ªåŠ¨åŒ–æ¨å¯¼
- âœ… **ç­–ç•¥ä»£ç ç”Ÿæˆ**ï¼šä»æ¦‚å¿µåˆ°å¯æ‰§è¡Œä»£ç çš„å®Œæ•´å®ç°
- âœ… **å›æµ‹ä¸ä¼˜åŒ–**ï¼šå†å²æ•°æ®å›æµ‹ã€å‚æ•°ä¼˜åŒ–ã€æ€§èƒ½è¯„ä¼°
- âœ… **çŸ¥è¯†ç®¡ç†ç³»ç»Ÿ**ï¼šé‡åŒ–æ¦‚å¿µã€ç­–ç•¥åŸç†çš„é—´éš”é‡å¤è®°å¿†

### åº”ç”¨åœºæ™¯

| åœºæ™¯ | æè¿° | AI æ¨¡å‹ |
|------|------|---------|
| æŠ€æœ¯åˆ†æ | Kçº¿å›¾å½¢æ€è¯†åˆ«ã€æŠ€æœ¯æŒ‡æ ‡åˆ†æ | GLM-4.5V + DeepSeek |
| å› å­æŒ–æ˜ | é‡åŒ–å› å­æ„å»ºã€æœ‰æ•ˆæ€§æ£€éªŒ | Qwen-Math + DeepSeek |
| ç­–ç•¥å¼€å‘ | ç­–ç•¥è®¾è®¡ã€ä»£ç å®ç°ã€å‚æ•°ä¼˜åŒ– | DeepSeek + Qwen-Math |
| é£é™©ç®¡ç† | VaRè®¡ç®—ã€å‹åŠ›æµ‹è¯•ã€å½’å› åˆ†æ | Qwen-Math + DeepSeek |
| çŸ¥è¯†å­¦ä¹  | é‡åŒ–ç†è®ºã€é‡‘èå·¥ç¨‹æ¦‚å¿µå­¦ä¹  | å…¨æ¨¡å‹ + Anki |

---

## æŠ€æœ¯æ¶æ„

### ç³»ç»Ÿç»„ä»¶

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    ç”¨æˆ·äº¤äº’å±‚                                â”‚
â”‚  Dify Web UI / Jupyter Notebook / Trading Terminal          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  åº”ç”¨é€»è¾‘å±‚ (Dify)                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚ æ•°æ®æ”¶é›†å™¨   â”‚  â”‚ åˆ†æå¼•æ“     â”‚  â”‚ ä»£ç ç”Ÿæˆå™¨   â”‚     â”‚
â”‚  â”‚ å¤šæºæ•°æ®API  â”‚  â”‚ å¤šæ¨¡å‹è·¯ç”±   â”‚  â”‚ ç­–ç•¥å®ç°     â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    AI æ¨¡å‹å±‚                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚  â”‚ GLM-4.5V    â”‚  â”‚ Qwen-Math   â”‚  â”‚ DeepSeek-V3 â”‚        â”‚
â”‚  â”‚ å›¾è¡¨è¯†åˆ«    â”‚  â”‚ æ•°å­¦å»ºæ¨¡    â”‚  â”‚ ä»£ç ç”Ÿæˆ    â”‚        â”‚
â”‚  â”‚ Â¥10/M tok  â”‚  â”‚ Â¥2/M tokens â”‚  â”‚ Â¥1/M tokens â”‚        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  æ•°æ®ä¸å·¥å…·å±‚                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚å¸‚åœºæ•°æ®  â”‚  â”‚å›æµ‹å¼•æ“  â”‚  â”‚é£é™©æ¨¡å‹  â”‚  â”‚ Anki DB  â”‚  â”‚
â”‚  â”‚Tushare/  â”‚  â”‚Backtraderâ”‚  â”‚RiskMetricsâ”‚ â”‚çŸ¥è¯†åº“    â”‚  â”‚
â”‚  â”‚AkShare  â”‚  â”‚VectorBT  â”‚  â”‚ARCH/GARCHâ”‚  â”‚è®°å¿†å¡ç‰‡  â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### å·¥ä½œæµæ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚          Quantitative Finance AI Workflow v1.0              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚å¸‚åœºåˆ†æ  â”‚â†’â”‚ç­–ç•¥è®¾è®¡  â”‚â†’â”‚å›æµ‹éªŒè¯  â”‚â†’â”‚é£é™©è¯„ä¼°  â”‚  â”‚
â”‚  â”‚Market    â”‚  â”‚Strategy  â”‚  â”‚Backtest  â”‚  â”‚Risk      â”‚  â”‚
â”‚  â”‚Analysis  â”‚  â”‚Design    â”‚  â”‚& Verify  â”‚  â”‚Mgmt      â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚      â†“            â†“            â†“            â†“             â”‚
â”‚   GLM-4.5V    Qwen-Math    DeepSeek     Qwen-Math        â”‚
â”‚   (å›¾è¡¨)      (æ•°å­¦)       (ä»£ç )       (é£é™©)           â”‚
â”‚      â†“            â†“            â†“            â†“             â”‚
â”‚   DeepSeek    DeepSeek    å›æµ‹å¼•æ“     é£é™©æ¨¡å‹          â”‚
â”‚   (æŠ€æœ¯åˆ†æ)  (ç­–ç•¥è§£é‡Š)  (æ€§èƒ½è¯„ä¼°)   (VaR/å½’å› )        â”‚
â”‚      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚
â”‚                        â†“                                  â”‚
â”‚              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                         â”‚
â”‚              â”‚ çŸ¥è¯†å¡ç‰‡ç”Ÿæˆå™¨   â”‚                         â”‚
â”‚              â”‚ Anki Generator   â”‚                         â”‚
â”‚              â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                         â”‚
â”‚                       â†“                                  â”‚
â”‚              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                         â”‚
â”‚              â”‚ é‡åŒ–çŸ¥è¯†åº“       â”‚                         â”‚
â”‚              â”‚ Anki Database    â”‚                         â”‚
â”‚              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## æ ¸å¿ƒåŠŸèƒ½æ¨¡å—

### æ¨¡å— 1ï¼šæ™ºèƒ½å¸‚åœºåˆ†æ

**åŠŸèƒ½æè¿°**ï¼š
- Kçº¿å›¾å½¢æ€è¯†åˆ«ï¼ˆå¤´è‚©é¡¶/åº•ã€åŒé¡¶/åŒåº•ã€ä¸‰è§’å½¢ç­‰ï¼‰
- æŠ€æœ¯æŒ‡æ ‡è®¡ç®—ä¸è§£è¯»ï¼ˆMAã€MACDã€RSIã€å¸ƒæ—å¸¦ç­‰ï¼‰
- æ”¯æ’‘é˜»åŠ›ä½è¯†åˆ«
- è¶‹åŠ¿åˆ¤æ–­ä¸é¢„æµ‹

**è¾“å…¥**ï¼š
```yaml
æ•°æ®è¾“å…¥:
  - è‚¡ç¥¨ä»£ç /äº¤æ˜“å¯¹
  - Kçº¿å›¾æˆªå›¾ï¼ˆå¯é€‰ï¼‰
  - æ—¶é—´å‘¨æœŸï¼ˆæ—¥çº¿/å‘¨çº¿/æœˆçº¿ï¼‰
  - åˆ†æé‡ç‚¹ï¼ˆè¶‹åŠ¿/å½¢æ€/æŒ‡æ ‡ï¼‰
```

**è¾“å‡º**ï¼š
```json
{
  "trend_analysis": "ä¸Šå‡è¶‹åŠ¿/ä¸‹é™è¶‹åŠ¿/éœ‡è¡",
  "chart_patterns": ["åŒé¡¶", "ä¸‰è§’å½¢æ•´ç†"],
  "key_levels": {
    "support": [100.5, 98.2],
    "resistance": [105.8, 108.0]
  },
  "technical_indicators": {
    "MACD": "é‡‘å‰ï¼Œçœ‹æ¶¨ä¿¡å·",
    "RSI": "65ï¼Œä¸­æ€§åå¤š",
    "Volume": "æ”¾é‡ä¸Šæ¶¨"
  },
  "trading_signals": ["çªç ´ä¹°å…¥", "æ­¢æŸä½ç½®"],
  "confidence_score": 0.75
}
```

---

### æ¨¡å— 2ï¼šé‡åŒ–ç­–ç•¥è®¾è®¡

**åŠŸèƒ½æè¿°**ï¼š
- ç­–ç•¥æ¦‚å¿µåˆ°æ•°å­¦æ¨¡å‹çš„è½¬æ¢
- å› å­æ„å»ºä¸ç»„åˆ
- æ‹©æ—¶ã€é€‰è‚¡ã€é…ç½®æ¨¡å‹
- æœºå™¨å­¦ä¹ ç­–ç•¥è®¾è®¡

**ç­–ç•¥ç±»å‹**ï¼š
1. **è¶‹åŠ¿è·Ÿè¸ªç­–ç•¥**
   - åŒå‡çº¿ç³»ç»Ÿ
   - çªç ´ç­–ç•¥
   - åŠ¨é‡ç­–ç•¥

2. **å‡å€¼å›å½’ç­–ç•¥**
   - ç»Ÿè®¡å¥—åˆ©
   - é…å¯¹äº¤æ˜“
   - æ³¢åŠ¨ç‡ç­–ç•¥

3. **å¤šå› å­ç­–ç•¥**
   - Fama-French ä¸‰å› å­
   - åŠ¨é‡å› å­
   - è´¨é‡å› å­

4. **æœºå™¨å­¦ä¹ ç­–ç•¥**
   - LSTM é¢„æµ‹
   - å¼ºåŒ–å­¦ä¹ 
   - é›†æˆå­¦ä¹ 

**è¾“å…¥**ï¼š
```yaml
ç­–ç•¥è¾“å…¥:
  ç­–ç•¥ç±»å‹: "å¤šå› å­é€‰è‚¡"
  æ ‡çš„æ± : "æ²ªæ·±300æˆåˆ†è‚¡"
  å› å­æ± : ["å¸‚å€¼", "åŠ¨é‡", "æ³¢åŠ¨ç‡", "ä¼°å€¼"]
  å›çœ‹å‘¨æœŸ: "3å¹´"
  è°ƒä»“é¢‘ç‡: "æœˆåº¦"
```

**è¾“å‡º**ï¼š
```python
# ç­–ç•¥ä»£ç æ¡†æ¶
class MultiFactorStrategy:
    def __init__(self):
        self.factors = ['momentum', 'value', 'quality']
        self.rebalance_freq = 'monthly'
        self.top_n = 50

    def calculate_factors(self, data):
        """å› å­è®¡ç®—"""
        factors = {}
        # åŠ¨é‡å› å­ï¼šè¿‡å»12ä¸ªæœˆæ”¶ç›Šç‡
        factors['momentum'] = data['close'].pct_change(252)

        # ä»·å€¼å› å­ï¼šå¸‚ç›ˆç‡å€’æ•°
        factors['value'] = 1 / data['pe_ratio']

        # è´¨é‡å› å­ï¼šROE
        factors['quality'] = data['roe']

        return factors

    def rank_and_select(self, factors):
        """å› å­æ‰“åˆ†ä¸é€‰è‚¡"""
        scores = factors.mean(axis=1)
        return scores.nlargest(self.top_n).index

    def generate_positions(self, selected_stocks):
        """ç”Ÿæˆç›®æ ‡æŒä»“"""
        positions = {}
        weight = 1 / len(selected_stocks)
        for stock in selected_stocks:
            positions[stock] = weight
        return positions
```

---

### æ¨¡å— 3ï¼šå›æµ‹ä¸æ€§èƒ½è¯„ä¼°

**åŠŸèƒ½æè¿°**ï¼š
- å†å²æ•°æ®å›æµ‹
- æ€§èƒ½æŒ‡æ ‡è®¡ç®—ï¼ˆå¤æ™®ç‡ã€æœ€å¤§å›æ’¤ã€èƒœç‡ç­‰ï¼‰
- å‚æ•°ä¼˜åŒ–
- è¿‡æ‹Ÿåˆæ£€æµ‹

**æ€§èƒ½æŒ‡æ ‡**ï¼š
```python
# æ ¸å¿ƒæ€§èƒ½æŒ‡æ ‡
performance_metrics = {
    # æ”¶ç›ŠæŒ‡æ ‡
    'total_return': 0.35,           # æ€»æ”¶ç›Šç‡
    'annual_return': 0.12,           # å¹´åŒ–æ”¶ç›Š
    'excess_return': 0.05,           # è¶…é¢æ”¶ç›Š

    # é£é™©æŒ‡æ ‡
    'volatility': 0.15,              # æ³¢åŠ¨ç‡
    'max_drawdown': -0.18,           # æœ€å¤§å›æ’¤
    'var_95': -0.03,                 # 95% VaR

    # é£é™©è°ƒæ•´æ”¶ç›Š
    'sharpe_ratio': 0.8,             # å¤æ™®ç‡
    'sortino_ratio': 1.2,            # ç´¢æè¯ºç‡
    'calmar_ratio': 0.67,            # å¡ç›ç‡
    'information_ratio': 0.5,        # ä¿¡æ¯æ¯”ç‡

    # äº¤æ˜“æŒ‡æ ‡
    'win_rate': 0.55,                # èƒœç‡
    'profit_factor': 1.8,            # ç›ˆäºæ¯”
    'avg_trade_return': 0.008,       # å¹³å‡äº¤æ˜“æ”¶ç›Š
    'trade_count': 156                # äº¤æ˜“æ¬¡æ•°
}
```

**å›æµ‹æŠ¥å‘Š**ï¼š
```
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                    å›æµ‹æ€§èƒ½æŠ¥å‘Š                                 â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘ å›æµ‹åŒºé—´ï¼š2021-01-01 è‡³ 2023-12-31                              â•‘
â•‘ åˆå§‹èµ„é‡‘ï¼šÂ¥1,000,000                                            â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘ ç­–ç•¥è¡¨ç°                                                         â•‘
â•‘ æ€»æ”¶ç›Šç‡ï¼š35.0%       å¹´åŒ–æ”¶ç›Šç‡ï¼š12.0%                          â•‘
â•‘ åŸºå‡†æ”¶ç›Šç‡ï¼š20.0%     è¶…é¢æ”¶ç›Šï¼š15.0%                            â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘ é£é™©æŒ‡æ ‡                                                         â•‘
â•‘ æ³¢åŠ¨ç‡ï¼š15.0%         æœ€å¤§å›æ’¤ï¼š-18.0%                          â•‘
â•‘ å¤æ™®ç‡ï¼š0.80           ç´¢æè¯ºç‡ï¼š1.20                           â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘ äº¤æ˜“ç»Ÿè®¡                                                         â•‘
â•‘ äº¤æ˜“æ¬¡æ•°ï¼š156          èƒœç‡ï¼š55%                                 â•‘
â•‘ å¹³å‡æ”¶ç›Šï¼š0.8%         ç›ˆäºæ¯”ï¼š1.8                              â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
```

---

### æ¨¡å— 4ï¼šé£é™©ç®¡ç†

**åŠŸèƒ½æè¿°**ï¼š
- VaRï¼ˆValue at Riskï¼‰è®¡ç®—
- å‹åŠ›æµ‹è¯•
- å½’å› åˆ†æ
- é£é™©é¢„ç®—

**é£é™©æ¨¡å‹**ï¼š

**1. VaR æ¨¡å‹**
```python
# å†å²æ¨¡æ‹Ÿæ³•
def historical_var(returns, confidence=0.95):
    """
    å†å²æ¨¡æ‹Ÿæ³•è®¡ç®— VaR

    å‚æ•°ï¼š
    - returns: æ”¶ç›Šç‡åºåˆ—
    - confidence: ç½®ä¿¡æ°´å¹³ï¼ˆé»˜è®¤95%ï¼‰

    è¿”å›ï¼š
    - VaR: åœ¨é™©ä»·å€¼
    """
    return np.percentile(returns, (1 - confidence) * 100)

# å‚æ•°æ³•ï¼ˆæ­£æ€åˆ†å¸ƒï¼‰
def parametric_var(returns, confidence=0.95):
    """
    å‚æ•°æ³•è®¡ç®— VaRï¼ˆå‡è®¾æ”¶ç›Šç‡æœä»æ­£æ€åˆ†å¸ƒï¼‰

    VaR = Î¼ - z_Î± Ã— Ïƒ
    """
    mu = returns.mean()
    sigma = returns.std()
    z_score = stats.norm.ppf(1 - confidence)

    var = mu - z_score * sigma
    return var

# è’™ç‰¹å¡æ´›æ¨¡æ‹Ÿ
def monte_carlo_var(returns, confidence=0.95, n_simulations=10000):
    """
    è’™ç‰¹å¡æ´›æ¨¡æ‹Ÿè®¡ç®— VaR
    """
    mu = returns.mean()
    sigma = returns.std()

    # æ¨¡æ‹Ÿæœªæ¥æ”¶ç›Šç‡
    simulated_returns = np.random.normal(mu, sigma, n_simulations)

    # è®¡ç®— VaR
    var = np.percentile(simulated_returns, (1 - confidence) * 100)
    return var
```

**2. CVaRï¼ˆæ¡ä»¶VaRï¼‰**
```python
def cvar(returns, confidence=0.95):
    """
    æ¡ä»¶VaRï¼ˆExpected Shortfallï¼‰
    è¶…è¿‡ VaR çš„å¹³å‡æŸå¤±
    """
    var = historical_var(returns, confidence)
    return returns[returns <= var].mean()
```

**3. æœ€å¤§å›æ’¤**
```python
def max_drawdown(prices):
    """
    è®¡ç®—æœ€å¤§å›æ’¤

    MDD = (å³°å€¼ - è°·å€¼) / å³°å€¼
    """
    cumulative = (1 + prices.pct_change()).cumprod()
    running_max = cumulative.expanding().max()
    drawdown = (cumulative - running_max) / running_max

    return drawdown.min()
```

**é£é™©å½’å› **ï¼š
```yaml
é£é™©åˆ†è§£:
  - ç³»ç»Ÿæ€§é£é™©: 60%
  - ç‰¹è´¨æ€§é£é™©: 25%
  - æ¨¡å‹é£é™©: 10%
  - æµåŠ¨æ€§é£é™©: 5%

è¡Œä¸šæš´éœ²:
  - é‡‘è: 25%
  - ç§‘æŠ€: 30%
  - æ¶ˆè´¹: 20%
  - å…¶ä»–: 25%

å› å­æš´éœ²:
  - å¸‚åœºå› å­: 0.8
  - è§„æ¨¡å› å­: 0.3
  - ä»·å€¼å› å­: -0.2
  - åŠ¨é‡å› å­: 0.5
```

---

### æ¨¡å— 5ï¼šé‡åŒ–çŸ¥è¯†ç®¡ç†

**åŠŸèƒ½æè¿°**ï¼š
- é‡åŒ–æ¦‚å¿µå¡ç‰‡ç”Ÿæˆ
- å…¬å¼æ¨å¯¼å¡ç‰‡
- ç­–ç•¥åŸç†å¡ç‰‡
- ç¼–ç æŠ€å·§å¡ç‰‡

**å¡ç‰‡ç±»å‹**ï¼š

**1. æ¦‚å¿µå¡ç‰‡**
```yaml
æ­£é¢: ä»€ä¹ˆæ˜¯ Black-Scholes æœŸæƒå®šä»·æ¨¡å‹ï¼Ÿ

èƒŒé¢:
Black-Scholes æ¨¡å‹æ˜¯ä¸€ç§æ•°å­¦æ¨¡å‹ï¼Œç”¨äºè®¡ç®—æ¬§å¼æœŸæƒçš„ç†è®ºä»·æ ¼ã€‚

æ ¸å¿ƒå‡è®¾ï¼š
1. æ ‡çš„èµ„äº§ä»·æ ¼æœä»å‡ ä½•å¸ƒæœ—è¿åŠ¨
2. æ— é£é™©åˆ©ç‡æ’å®š
3. æ ‡çš„èµ„äº§ä¸æ”¯ä»˜è‚¡æ¯
4. å¸‚åœºæ— æ‘©æ“¦ï¼ˆæ— äº¤æ˜“æˆæœ¬ã€æ— ç¨æ”¶ï¼‰
5. å¯ä»¥æ— é™å€Ÿè´·

å®šä»·å…¬å¼ï¼š
C = Sâ‚€N(dâ‚) - Ke^(-rT)N(dâ‚‚)

å…¶ä¸­ï¼š
- C: çœ‹æ¶¨æœŸæƒä»·æ ¼
- Sâ‚€: æ ‡çš„èµ„äº§å½“å‰ä»·æ ¼
- K: è¡Œæƒä»·æ ¼
- r: æ— é£é™©åˆ©ç‡
- T: åˆ°æœŸæ—¶é—´
- N(Â·): æ ‡å‡†æ­£æ€åˆ†å¸ƒçš„ç´¯ç§¯åˆ†å¸ƒå‡½æ•°

å±€é™æ€§ï¼š
- ä¸é€‚ç”¨äºç¾å¼æœŸæƒ
- ä¸è€ƒè™‘è‚¡æ¯æ”¯ä»˜
- å‡è®¾æ³¢åŠ¨ç‡æ’å®š
```

**2. å…¬å¼å¡ç‰‡**
```yaml
æ­£é¢: æ¨å¯¼å¤æ™®ç‡å…¬å¼

èƒŒé¢:
å¤æ™®ç‡è¡¡é‡æ¯æ‰¿æ‹…ä¸€å•ä½æ€»é£é™©æ‰€è·å¾—çš„è¶…é¢æ”¶ç›Šã€‚

å®šä¹‰ï¼š
Sharpe Ratio = (R_p - R_f) / Ïƒ_p

æ¨å¯¼è¿‡ç¨‹ï¼š

1. è¶…é¢æ”¶ç›Šï¼š
   E[R_p - R_f] = E[R_p] - R_f

2. é£é™©ï¼ˆæ ‡å‡†å·®ï¼‰ï¼š
   Ïƒ_p = sqrt(Var[R_p])

3. é£é™©è°ƒæ•´æ”¶ç›Šï¼š
   å°†è¶…é¢æ”¶ç›Šé™¤ä»¥é£é™©

   Sharpe = (E[R_p] - R_f) / Ïƒ_p

ç›´è§‚ç†è§£ï¼š
- Sharpe > 1: ä¼˜ç§€
- Sharpe > 2: éå¸¸ä¼˜ç§€
- Sharpe > 3: å“è¶Š

æ„ä¹‰ï¼š
- é‡åŒ–å•ä½é£é™©çš„æ”¶ç›Š
- ä¾¿äºä¸åŒç­–ç•¥æ¯”è¾ƒ
- è€ƒè™‘äº†æ— é£é™©åˆ©ç‡
```

**3. ä»£ç å¡ç‰‡**
```yaml
æ­£é¢: å®ç°æ»šåŠ¨å¤æ™®ç‡è®¡ç®—å‡½æ•°

èƒŒé¢:
```python
def rolling_sharpe(returns, window=252, risk_free_rate=0.03):
    """
    è®¡ç®—æ»šåŠ¨å¤æ™®ç‡

    å‚æ•°ï¼š
    - returns: æ—¥æ”¶ç›Šç‡åºåˆ—
    - window: æ»šåŠ¨çª—å£ï¼ˆé»˜è®¤252ä¸ªäº¤æ˜“æ—¥ï¼‰
    - risk_free_rate: å¹´åŒ–æ— é£é™©åˆ©ç‡

    è¿”å›ï¼š
    - æ»šåŠ¨å¤æ™®ç‡åºåˆ—
    """
    # è½¬æ¢ä¸ºæ—¥æ— é£é™©åˆ©ç‡
    daily_rf = risk_free_rate / 252

    # è®¡ç®—æ»šåŠ¨å‡å€¼å’Œæ ‡å‡†å·®
    rolling_mean = returns.rolling(window).mean()
    rolling_std = returns.rolling(window).std()

    # è®¡ç®—æ»šåŠ¨å¤æ™®ç‡
    rolling_sharpe = (rolling_mean - daily_rf) / rolling_std

    # å¹´åŒ–
    sharpe_annualized = rolling_sharpe * np.sqrt(252)

    return sharpe_annualized
```

ä½¿ç”¨ç¤ºä¾‹ï¼š
```python
import pandas as pd

# å‡è®¾æœ‰æ”¶ç›Šç‡æ•°æ®
returns = pd.Series([...])

# è®¡ç®—252å¤©æ»šåŠ¨å¤æ™®ç‡
sharpe_series = rolling_sharpe(returns)

# å¯è§†åŒ–
sharpe_series.plot(title='Rolling Sharpe Ratio')
```

æ³¨æ„äº‹é¡¹ï¼š
- çª—å£é€‰æ‹©å½±å“ç»“æœ
- çŸ­æœŸçª—å£ï¼šååº”çµæ•ä½†å™ªå£°å¤§
- é•¿æœŸçª—å£ï¼šå¹³æ»‘ä½†æ»å
```

---

## å·¥ä½œæµè®¾è®¡

### å·¥ä½œæµ 1ï¼šæ™ºèƒ½æŠ€æœ¯åˆ†æ

```yaml
èŠ‚ç‚¹ 1: è¾“å…¥èŠ‚ç‚¹
è¾“å…¥å˜é‡:
  symbol: "AAPL"  # è‚¡ç¥¨ä»£ç 
  chart_image: [Kçº¿å›¾æˆªå›¾]
  timeframe: "daily"  # æ—¶é—´å‘¨æœŸ
  focus: "trend"  # åˆ†æé‡ç‚¹

èŠ‚ç‚¹ 2: å›¾è¡¨è¯†åˆ«å™¨ (GLM-4.5V)
æç¤ºè¯:
"""
ä½ æ˜¯ä¸“ä¸šçš„æŠ€æœ¯åˆ†æå¸ˆã€‚åˆ†æè¿™å¼ Kçº¿å›¾ã€‚

å›¾ç‰‡ï¼š{{#start.chart_image#}}

è¯·è¯†åˆ«ï¼š
1. å›¾è¡¨å½¢æ€ï¼ˆå¤´è‚©é¡¶/åº•ã€åŒé¡¶/åŒåº•ã€ä¸‰è§’å½¢ç­‰ï¼‰
2. è¶‹åŠ¿æ–¹å‘ï¼ˆä¸Šå‡/ä¸‹é™/éœ‡è¡ï¼‰
3. å…³é”®ä»·æ ¼ä½ï¼ˆæ”¯æ’‘/é˜»åŠ›ï¼‰
4. æˆäº¤é‡ç‰¹å¾
5. æŠ€æœ¯ä¿¡å·ï¼ˆä¹°å…¥/å–å‡º/è§‚æœ›ï¼‰

è¯·è¯¦ç»†è¯´æ˜ä½ çš„åˆ†æè¿‡ç¨‹ã€‚
"""

èŠ‚ç‚¹ 3: æŠ€æœ¯æŒ‡æ ‡è®¡ç®— (ä»£ç æ‰§è¡Œ)
ä»£ç :
```python
import pandas as pd
import numpy as np
import talib

def calculate_indicators(prices):
    """è®¡ç®—å¸¸ç”¨æŠ€æœ¯æŒ‡æ ‡"""

    # ç§»åŠ¨å¹³å‡çº¿
    prices['MA5'] = talib.MA(prices['close'], timeperiod=5)
    prices['MA20'] = talib.MA(prices['close'], timeperiod=20)
    prices['MA60'] = talib.MA(prices['close'], timeperiod=60)

    # MACD
    macd, signal, hist = talib.MACD(prices['close'])
    prices['MACD'] = macd
    prices['MACD_Signal'] = signal
    prices['MACD_Hist'] = hist

    # RSI
    prices['RSI'] = talib.RSI(prices['close'], timeperiod=14)

    # å¸ƒæ—å¸¦
    upper, middle, lower = talib.BBANDS(prices['close'])
    prices['BB_Upper'] = upper
    prices['BB_Middle'] = middle
    prices['BB_Lower'] = lower

    # æˆäº¤é‡æŒ‡æ ‡
    prices['Volume_MA'] = talib.MA(prices['volume'], timeperiod=20)

    return prices

# è·å–æ•°æ®ï¼ˆç¤ºä¾‹ï¼‰
# å®é™…åº”ç”¨ä¸­è¿æ¥æ•°æ®æº
data = get_price_data(symbol)
indicators = calculate_indicators(data)

return indicators
```

èŠ‚ç‚¹ 4: ç»¼åˆåˆ†æ (DeepSeek-V3)
è¾“å…¥:
  - GLM-4.5V çš„å›¾è¡¨è¯†åˆ«ç»“æœ
  - æŠ€æœ¯æŒ‡æ ‡è®¡ç®—ç»“æœ

æç¤ºè¯:
"""
ä½ æ˜¯èµ„æ·±çš„æŠ€æœ¯åˆ†æå¸ˆã€‚ç»¼åˆä»¥ä¸‹ä¿¡æ¯ï¼Œç»™å‡ºå®Œæ•´çš„æŠ€æœ¯åˆ†ææŠ¥å‘Šã€‚

å›¾è¡¨è¯†åˆ«ç»“æœï¼š
{{#chart_recognizer.result#}}

æŠ€æœ¯æŒ‡æ ‡ï¼š
{{#indicator_calculator.result#}}

è¯·ç”ŸæˆåŒ…å«ä»¥ä¸‹å†…å®¹çš„åˆ†ææŠ¥å‘Šï¼š

1. è¶‹åŠ¿åˆ¤æ–­
2. å…³é”®ä»·ä½ï¼ˆæ”¯æ’‘/é˜»åŠ›ï¼‰
3. æŠ€æœ¯æŒ‡æ ‡è§£è¯»
4. äº¤æ˜“ä¿¡å·
5. é£é™©æç¤º
6. æ“ä½œå»ºè®®

è¯·ç»™å‡ºå…·ä½“çš„ä»·ä½å’Œæ­¢æŸä½ç½®ã€‚
"""

èŠ‚ç‚¹ 5: çŸ¥è¯†å¡ç‰‡ç”Ÿæˆ
ç”Ÿæˆå†…å®¹ï¼š
- æŠ€æœ¯æŒ‡æ ‡åŸç†å¡ç‰‡
- å›¾è¡¨å½¢æ€è¯†åˆ«å¡ç‰‡
- äº¤æ˜“ç­–ç•¥å¡ç‰‡
```

---

### å·¥ä½œæµ 2ï¼šé‡åŒ–ç­–ç•¥å¼€å‘

```yaml
èŠ‚ç‚¹ 1: ç­–ç•¥å®šä¹‰
è¾“å…¥å˜é‡:
  strategy_type: "multi_factor"  # ç­–ç•¥ç±»å‹
  universe: "æ²ªæ·±300"  # è‚¡ç¥¨æ± 
  factors: ["momentum", "value", "quality"]  # å› å­åˆ—è¡¨
  rebalance_freq: "monthly"  # è°ƒä»“é¢‘ç‡

èŠ‚ç‚¹ 2: å› å­æ•°å­¦å»ºæ¨¡ (Qwen-Math)
æç¤ºè¯:
"""
ä½ æ˜¯é‡åŒ–é‡‘èä¸“å®¶ã€‚è®¾è®¡ä¸€ä¸ªå¤šå› å­é€‰è‚¡æ¨¡å‹ã€‚

ç­–ç•¥å‚æ•°ï¼š
- è‚¡ç¥¨æ± ï¼š{{#start.universe#}}
- å› å­ï¼š{{#start.factors#}}
- è°ƒä»“é¢‘ç‡ï¼š{{#start.rebalance_freq#}}

è¯·æä¾›ï¼š

1. å› å­å®šä¹‰ä¸è®¡ç®—å…¬å¼
2. å› å­æ ‡å‡†åŒ–æ–¹æ³•ï¼ˆZ-scoreã€Rankç­‰ï¼‰
3. å› å­åŠ æƒæ–¹æ¡ˆï¼ˆç­‰æƒã€ICåŠ æƒã€æœ€ä¼˜åŒ–åŠ æƒï¼‰
4. é£é™©æ§åˆ¶æ¨¡å‹ï¼ˆè¡Œä¸šä¸­æ€§ã€é£æ ¼ä¸­æ€§ï¼‰
5. å› å­æœ‰æ•ˆæ€§æ£€éªŒæ–¹æ³•

è¯·ç»™å‡ºå®Œæ•´çš„æ•°å­¦å…¬å¼å’Œæ¨å¯¼è¿‡ç¨‹ã€‚
"""

èŠ‚ç‚¹ 3: ç­–ç•¥ä»£ç ç”Ÿæˆ (DeepSeek-V3)
è¾“å…¥:
  - Qwen-Math çš„æ•°å­¦æ¨¡å‹

æç¤ºè¯:
"""
ä½ æ˜¯ Python é‡åŒ–å¼€å‘ä¸“å®¶ã€‚åŸºäºä»¥ä¸‹æ•°å­¦æ¨¡å‹ï¼Œå®ç°å®Œæ•´çš„äº¤æ˜“ç­–ç•¥ã€‚

æ•°å­¦æ¨¡å‹ï¼š
{{#math_model.result#}}

è¯·ç”Ÿæˆï¼š

1. å› å­è®¡ç®—å‡½æ•°
2. å› å­åˆæˆä¸æ‰“åˆ†å‡½æ•°
3. é€‰è‚¡ä¸æƒé‡åˆ†é…å‡½æ•°
4. å›æµ‹æ¡†æ¶æ¥å£
5. æ€§èƒ½åˆ†æå‡½æ•°

è¦æ±‚ï¼š
- ä½¿ç”¨ pandas/numpy
- ä»£ç æ¨¡å—åŒ–
- æ·»åŠ è¯¦ç»†æ³¨é‡Š
- åŒ…å«ä½¿ç”¨ç¤ºä¾‹
"""

è¾“å‡º:
```python
# å› å­è®¡ç®—æ¨¡å—
import pandas as pd
import numpy as np

class FactorCalculator:
    """é‡åŒ–å› å­è®¡ç®—å™¨"""

    @staticmethod
    def momentum_factor(price_data, period=252):
        """
        åŠ¨é‡å› å­

        M_t = (P_t - P_{t-n}) / P_{t-n}

        å…¶ä¸­ï¼š
        - P_t: å½“å‰ä»·æ ¼
        - P_{t-n}: næœŸå‰ä»·æ ¼
        """
        return price_data.pct_change(period)

    @staticmethod
    def value_factor(market_cap, pe_ratio):
        """
        ä»·å€¼å› å­

        ç»¼åˆè€ƒè™‘ï¼š
        - å¸‚å€¼å› å­çš„å€’æ•°ï¼ˆå°å¸‚å€¼åå¥½ï¼‰
        - å¸‚ç›ˆç‡çš„å€’æ•°ï¼ˆä½ä¼°å€¼åå¥½ï¼‰
        """
        # æ ‡å‡†åŒ–
        mc_inv = 1 / market_cap
        pe_inv = 1 / pe_ratio

        # Z-scoreæ ‡å‡†åŒ–
        mc_z = (mc_inv - mc_inv.mean()) / mc_inv.std()
        pe_z = (pe_inv - pe_inv.mean()) / pe_inv.std()

        # ç­‰æƒåˆæˆ
        value_factor = (mc_z + pe_z) / 2

        return value_factor

    @staticmethod
    def quality_factor(roe, roa, debt_ratio):
        """
        è´¨é‡å› å­

        ç»¼åˆè€ƒè™‘ï¼š
        - ROEï¼ˆå‡€èµ„äº§æ”¶ç›Šç‡ï¼‰
        - ROAï¼ˆæ€»èµ„äº§æ”¶ç›Šç‡ï¼‰
        - è´Ÿå€ºç‡ï¼ˆå€’æ•°ï¼‰
        """
        # æ ‡å‡†åŒ–
        roe_z = (roe - roe.mean()) / roe.std()
        roa_z = (roa - roa.mean()) / roa.std()
        debt_z = ((1/debt_ratio) - (1/debt_ratio).mean()) / (1/debt_ratio).std()

        # ç­‰æƒåˆæˆ
        quality_factor = (roe_z + roa_z + debt_z) / 3

        return quality_factor


# å¤šå› å­ç­–ç•¥å®ç°
class MultiFactorStrategy:
    """å¤šå› å­é€‰è‚¡ç­–ç•¥"""

    def __init__(self, factors, top_n=50):
        """
        å‚æ•°ï¼š
        - factors: å› å­åˆ—è¡¨ ['momentum', 'value', 'quality']
        - top_n: é€‰è‚¡æ•°é‡
        """
        self.factors = factors
        self.top_n = top_n
        self.calculator = FactorCalculator()

    def calculate_all_factors(self, data):
        """è®¡ç®—æ‰€æœ‰å› å­"""
        factor_data = {}

        for factor in self.factors:
            if factor == 'momentum':
                factor_data[factor] = self.calculator.momentum_factor(
                    data['close']
                )
            elif factor == 'value':
                factor_data[factor] = self.calculator.value_factor(
                    data['market_cap'],
                    data['pe_ratio']
                )
            elif factor == 'quality':
                factor_data[factor] = self.calculator.quality_factor(
                    data['roe'],
                    data['roa'],
                    data['debt_ratio']
                )

        return pd.DataFrame(factor_data)

    def composite_score(self, factor_data):
        """
        å› å­åˆæˆå¾—åˆ†

        æ–¹æ³•ï¼šç­‰æƒåŠ æƒå› å­å¾—åˆ†
        """
        # æ¯ä¸ªå› å­å·²ç»æ ‡å‡†åŒ–ï¼Œç›´æ¥ç­‰æƒå¹³å‡
        scores = factor_data.mean(axis=1)

        return scores

    def select_stocks(self, scores):
        """é€‰è‚¡"""
        # é€‰æ‹©å¾—åˆ†æœ€é«˜çš„ N åªè‚¡ç¥¨
        selected = scores.nlargest(self.top_n)

        return selected.index.tolist()

    def generate_positions(self, selected_stocks):
        """ç”Ÿæˆç›®æ ‡æŒä»“"""
        # ç­‰æƒé…ç½®
        weight = 1 / len(selected_stocks)

        positions = {stock: weight for stock in selected_stocks}

        return positions


# ä½¿ç”¨ç¤ºä¾‹
if __name__ == "__main__":
    # åˆå§‹åŒ–ç­–ç•¥
    strategy = MultiFactorStrategy(
        factors=['momentum', 'value', 'quality'],
        top_n=50
    )

    # è®¡ç®—å› å­
    factor_data = strategy.calculate_all_factors(data)

    # å› å­åˆæˆ
    scores = strategy.composite_score(factor_data)

    # é€‰è‚¡
    selected = strategy.select_stocks(scores)

    # ç”ŸæˆæŒä»“
    positions = strategy.generate_positions(selected)

    print(f"é€‰ä¸­çš„è‚¡ç¥¨ï¼š{selected}")
    print(f"ç›®æ ‡æŒä»“ï¼š{positions}")
```

èŠ‚ç‚¹ 4: å›æµ‹æ¡†æ¶é›†æˆ
ä»£ç :
```python
import backtrader as bt

class MultiFactorStrategyBT(bt.Strategy):
    """Backtrader ç­–ç•¥å®ç°"""

    def __init__(self):
        self.factor_strategy = MultiFactorStrategy(
            factors=self.params.factors,
            top_n=self.params.top_n
        )

    def next(self):
        """æ¯æœˆç¬¬ä¸€ä¸ªäº¤æ˜“æ—¥è°ƒä»“"""
        if self.datetime._date.month != self._last_month:
            # è·å–æ•°æ®
            data = self.get_factor_data()

            # è®¡ç®—å› å­å¹¶é€‰è‚¡
            selected = self.factor_strategy.select_stocks(data)

            # è°ƒä»“
            self.rebalance(selected)

            self._last_month = self.datetime._date.month
```

èŠ‚ç‚¹ 5: æ€§èƒ½è¯„ä¼°
ä»£ç :
```python
def evaluate_backtest(results):
    """è¯„ä¼°å›æµ‹ç»“æœ"""

    metrics = {
        # æ”¶ç›ŠæŒ‡æ ‡
        'total_return': calculate_total_return(results),
        'annual_return': calculate_annual_return(results),
        'monthly_returns': results.resample('M').last(),

        # é£é™©æŒ‡æ ‡
        'volatility': results.pct_change().std() * np.sqrt(252),
        'max_drawdown': calculate_max_drawdown(results),
        'var_95': results.pct_change().quantile(0.05),

        # é£é™©è°ƒæ•´æ”¶ç›Š
        'sharpe_ratio': calculate_sharpe(results),
        'sortino_ratio': calculate_sortino(results),
        'calmar_ratio': calculate_calmar(results),

        # äº¤æ˜“ç»Ÿè®¡
        'trade_count': len(results['trades']),
        'win_rate': calculate_win_rate(results),
        'profit_factor': calculate_profit_factor(results),
    }

    return metrics
```

èŠ‚ç‚¹ 6: çŸ¥è¯†å¡ç‰‡ç”Ÿæˆ
ç”Ÿæˆå¡ç‰‡ï¼š
- å› å­å®šä¹‰å¡ç‰‡
- ç­–ç•¥åŸç†å¡ç‰‡
- ä»£ç å®ç°å¡ç‰‡
```

---

### å·¥ä½œæµ 3ï¼šé£é™©ç®¡ç†ç³»ç»Ÿ

```yaml
èŠ‚ç‚¹ 1: é£é™©è¾“å…¥
è¾“å…¥å˜é‡:
  portfolio: "æŒä»“ç»„åˆï¼ˆè‚¡ç¥¨+æƒé‡ï¼‰"
  confidence: 0.95  # ç½®ä¿¡æ°´å¹³
  horizon: 1  # æŒæœ‰æœŸï¼ˆå¤©ï¼‰

èŠ‚ç‚¹ 2: VaR è®¡ç®— (Qwen-Math)
æç¤ºè¯:
"""
ä½ æ˜¯é£é™©ç®¡ç†ä¸“å®¶ã€‚è§£é‡Šå¹¶å®ç° VaR æ¨¡å‹ã€‚

å‚æ•°ï¼š
- ç½®ä¿¡æ°´å¹³ï¼š{{#start.confidence#}}
- æŒæœ‰æœŸï¼š{{#start.horizon#}} å¤©

è¯·æä¾›ï¼š

1. VaR çš„æ•°å­¦å®šä¹‰
2. ä¸‰ç§è®¡ç®—æ–¹æ³•çš„æ¨å¯¼ï¼š
   - å†å²æ¨¡æ‹Ÿæ³•
   - å‚æ•°æ³•ï¼ˆæ­£æ€åˆ†å¸ƒï¼‰
   - è’™ç‰¹å¡æ´›æ¨¡æ‹Ÿ

3. æ¯ç§æ–¹æ³•çš„ä¼˜ç¼ºç‚¹
4. é€‚ç”¨åœºæ™¯
5. Python å®ç°ä»£ç 

è¯·è¯¦ç»†è¯´æ˜æ•°å­¦åŸç†å’Œå®ç°ç»†èŠ‚ã€‚
"""

èŠ‚ç‚¹ 3: é£é™©è®¡ç®— (ä»£ç æ‰§è¡Œ)
ä»£ç :
```python
import numpy as np
import pandas as pd
from scipy import stats

class RiskCalculator:
    """é£é™©è®¡ç®—å™¨"""

    def __init__(self, returns, confidence=0.95):
        """
        å‚æ•°ï¼š
        - returns: æ”¶ç›Šç‡åºåˆ—
        - confidence: ç½®ä¿¡æ°´å¹³
        """
        self.returns = returns
        self.confidence = confidence

    def historical_var(self):
        """å†å²æ¨¡æ‹Ÿæ³• VaR"""
        var = np.percentile(
            self.returns,
            (1 - self.confidence) * 100
        )
        return var

    def parametric_var(self):
        """å‚æ•°æ³• VaRï¼ˆæ­£æ€åˆ†å¸ƒï¼‰"""
        mu = self.returns.mean()
        sigma = self.returns.std()
        z_score = stats.norm.ppf(1 - self.confidence)

        var = mu - z_score * sigma
        return var

    def monte_carlo_var(self, n_simulations=10000):
        """è’™ç‰¹å¡æ´›æ¨¡æ‹Ÿ VaR"""
        mu = self.returns.mean()
        sigma = self.returns.std()

        # æ¨¡æ‹Ÿæœªæ¥æ”¶ç›Šç‡
        simulated = np.random.normal(
            mu, sigma, n_simulations
        )

        # è®¡ç®— VaR
        var = np.percentile(
            simulated,
            (1 - self.confidence) * 100
        )
        return var

    def cvar(self):
        """æ¡ä»¶VaRï¼ˆExpected Shortfallï¼‰"""
        var = self.historical_var()

        # è¶…è¿‡ VaR çš„å¹³å‡æŸå¤±
        cvar = self.returns[self.returns <= var].mean()

        return cvar

    def max_drawdown(self, prices):
        """æœ€å¤§å›æ’¤"""
        cumulative = (1 + self.returns).cumprod()
        running_max = cumulative.expanding().max()
        drawdown = (cumulative - running_max) / running_max

        return drawdown.min()

    def volatility(self, annualize=True):
        """æ³¢åŠ¨ç‡"""
        vol = self.returns.std()

        if annualize:
            vol *= np.sqrt(252)

        return vol

    def beta(self, portfolio_returns, market_returns):
        """Betaï¼ˆç³»ç»Ÿæ€§é£é™©ï¼‰"""
        covariance = np.cov(portfolio_returns, market_returns)[0, 1]
        market_variance = np.var(market_returns)

        beta = covariance / market_variance
        return beta
```

èŠ‚ç‚¹ 4: å‹åŠ›æµ‹è¯• (DeepSeek-V3)
æç¤ºè¯:
"""
ä½ æ˜¯é£é™©ä¸“å®¶ã€‚è®¾è®¡å‹åŠ›æµ‹è¯•æ–¹æ¡ˆã€‚

æŠ•èµ„ç»„åˆï¼š
{{#start.portfolio#}}

è¯·æä¾›ï¼š

1. å‹åŠ›åœºæ™¯è®¾è®¡ï¼ˆå†å²å±æœº + å‡è®¾åœºæ™¯ï¼‰
2. æ¯ä¸ªåœºæ™¯ä¸‹çš„ç»„åˆæŸå¤±ä¼°ç®—
3. æœ€åæƒ…æ™¯åˆ†æ
4. é£é™©ç¼“é‡Šå»ºè®®

å‹åŠ›åœºæ™¯ç±»å‹ï¼š
- 2008 é‡‘èå±æœºé‡æ¼”
- 2020 ç–«æƒ…æš´è·Œ
- æç«¯åˆ©ç‡æ³¢åŠ¨
- è¡Œä¸šé»‘å¤©é¹…
"""

èŠ‚ç‚¹ 5: é£é™©å½’å›  (ä»£ç æ‰§è¡Œ)
ä»£ç :
```python
class RiskAttribution:
    """é£é™©å½’å› åˆ†æ"""

    def factor_attribution(self, returns, factor_returns):
        """
        å› å­å½’å› 

        R_p = Î£ Î²_i Ã— F_i + Î±

        å…¶ä¸­ï¼š
        - R_p: ç»„åˆæ”¶ç›Š
        - Î²_i: å› å­æš´éœ²
        - F_i: å› å­æ”¶ç›Š
        - Î±: ç‰¹è´¨æ€§æ”¶ç›Š
        """
        from sklearn.linear_model import LinearRegression

        model = LinearRegression()
        model.fit(factor_returns, returns)

        # å› å­è´¡çŒ®
        factor_contributions = model.coef_ * factor_returns.mean()

        attribution = {
            'factor_betas': model.coef_,
            'factor_contributions': factor_contributions,
            'alpha': model.intercept_,
            'r_squared': model.score(factor_returns, returns)
        }

        return attribution

    industry_attribution(self, returns, industry_returns):
        """
        è¡Œä¸šå½’å› 

        è®¡ç®—æ¯ä¸ªè¡Œä¸šå¯¹ç»„åˆé£é™©çš„è´¡çŒ®
        """
        # è®¡ç®—è¡Œä¸šæš´éœ²
        total_var = returns.var()
        industry_contrib = {}

        for industry, ind_returns in industry_returns.items():
            cov = np.cov(returns, ind_returns)[0, 1]
            contrib = cov / total_var
            industry_contrib[industry] = contrib

        return industry_contrib
```

èŠ‚ç‚¹ 6: é£é™©æŠ¥å‘Šç”Ÿæˆ (DeepSeek-V3)
æç¤ºè¯:
"""
ç”Ÿæˆé£é™©ç®¡ç†æŠ¥å‘Šã€‚

è¾“å…¥æ•°æ®ï¼š
- VaR: {{#risk_calculator.var#}}
- CVaR: {{#risk_calculator.cvar#}}
- æœ€å¤§å›æ’¤: {{#risk_calculator.max_dd#}}
- æ³¢åŠ¨ç‡: {{#risk_calculator.volatility#}}
- å› å­å½’å› : {{#risk_attribution.factor#}}

è¯·ç”ŸæˆåŒ…å«ä»¥ä¸‹å†…å®¹çš„ä¸“ä¸šæŠ¥å‘Šï¼š

1. é£é™©æ¦‚è§ˆï¼ˆä»ªè¡¨ç›˜ï¼‰
2. é£é™©æŒ‡æ ‡è§£è¯»
3. é£é™©æ¥æºåˆ†æ
4. å‹åŠ›æµ‹è¯•ç»“æœ
5. é£é™©é™é¢æ£€æŸ¥
6. é£é™©ç¼“é‡Šå»ºè®®

æ ¼å¼ï¼šä¸“ä¸šã€æ¸…æ™°ã€å¯æ“ä½œ
"""

èŠ‚ç‚¹ 7: çŸ¥è¯†å¡ç‰‡ç”Ÿæˆ
ç”Ÿæˆå¡ç‰‡ï¼š
- é£é™©æ¨¡å‹åŸç†å¡ç‰‡
- VaR è®¡ç®—æ–¹æ³•å¡ç‰‡
- é£é™©å½’å› æ¦‚å¿µå¡ç‰‡
```

---

## æ•°æ®é›†æˆ

### æ•°æ®æºé…ç½®

**1. å…è´¹æ•°æ®æº**

```python
# Tushareï¼ˆéœ€è¦ç§¯åˆ†ï¼‰
import tushare as ts

# æ³¨å†Œå¹¶è·å– token
# https://tushare.pro/register
ts.set_token('your_token_here')
pro = ts.pro_api()

# è·å–è‚¡ç¥¨æ—¥çº¿æ•°æ®
df = pro.daily(
    ts_code='000001.SZ',
    start_date='20200101',
    end_date='20231231'
)

# è·å–è´¢åŠ¡æ•°æ®
df = pro.income(
    ts_code='000001.SZ',
    start_date='20200101',
    end_date='20231231'
)
```

```python
# AkShareï¼ˆå®Œå…¨å…è´¹ï¼‰
import akshare as ak

# è·å–è‚¡ç¥¨æ—¥çº¿æ•°æ®
df = ak.stock_zh_a_hist(
    symbol="000001",
    period="daily",
    start_date="20200101",
    end_date="20231231",
    adjust="qfq"  # å‰å¤æƒ
)

# è·å–å®æ—¶è¡Œæƒ…
df = ak.stock_zh_a_spot_em()

# è·å–è´¢åŠ¡æ•°æ®
df = ak.stock_financial_analysis_indicator(symbol="000001")

# è·å–å®è§‚ç»æµæ•°æ®
df = ak.macro_china_gdp()
```

```python
# yfinanceï¼ˆå›½é™…å¸‚åœºï¼‰
import yfinance as yf

# ä¸‹è½½ç¾è‚¡æ•°æ®
data = yf.download(
    'AAPL',
    start='2020-01-01',
    end='2023-12-31'
)

# è·å–æœŸæƒæ•°æ®
ticker = yf.Ticker('AAPL')
options = ticker.option_chain()
```

**2. æ•°æ®å­˜å‚¨æ–¹æ¡ˆ**

```python
# ä½¿ç”¨ SQLite å­˜å‚¨å†å²æ•°æ®
import sqlite3
import pandas as pd

class DataStorage:
    """æ•°æ®å­˜å‚¨ç®¡ç†å™¨"""

    def __init__(self, db_path='quant_data.db'):
        self.conn = sqlite3.connect(db_path)

    def save_prices(self, df, table_name='stock_prices'):
        """ä¿å­˜ä»·æ ¼æ•°æ®"""
        df.to_sql(
            table_name,
            self.conn,
            if_exists='append',
            index=False
        )

    def load_prices(
        self,
        symbol,
        start_date,
        end_date,
        table_name='stock_prices'
    ):
        """åŠ è½½ä»·æ ¼æ•°æ®"""
        query = f"""
        SELECT * FROM {table_name}
        WHERE symbol = '{symbol}'
        AND date BETWEEN '{start_date}' AND '{end_date}'
        ORDER BY date
        """

        df = pd.read_sql(query, self.conn)
        return df
```

### å®æ—¶æ•°æ®æµ

```python
# WebSocket å®æ—¶è¡Œæƒ…
import websocket
import json

class RealTimeDataFeed:
    """å®æ—¶æ•°æ®æ¨é€"""

    def __init__(self, on_data_callback):
        self.on_data = on_data_callback
        self.ws = None

    def connect(self, url):
        """è¿æ¥ WebSocket"""
        self.ws = websocket.WebSocketApp(
            url,
            on_message=self.on_message,
            on_error=self.on_error,
            on_close=self.on_close,
            on_open=self.on_open
        )
        self.ws.run_forever()

    def on_message(self, ws, message):
        """å¤„ç†æ¶ˆæ¯"""
        data = json.loads(message)
        self.on_data(data)

    def subscribe(self, symbols):
        """è®¢é˜…è‚¡ç¥¨ä»£ç """
        subscription = {
            "action": "subscribe",
            "symbols": symbols
        }
        self.ws.send(json.dumps(subscription))
```

---

## éƒ¨ç½²æŒ‡å—

### Phase 1ï¼šç¯å¢ƒå‡†å¤‡

```bash
# 1. å®‰è£… Python ä¾èµ–
pip install pandas numpy scipy
pip install backtrader vectorbt
pip install akshare yfinance tushare
pip install talib
pip install scikit-learn

# 2. å®‰è£… TA-Libï¼ˆæŠ€æœ¯æŒ‡æ ‡åº“ï¼‰
# macOS
brew install ta-lib

# Ubuntu/Debian
wget http://prdownloads.sourceforge.net/ta-lib/ta-lib-0.4.0-src.tar.gz
tar -xzf ta-lib-0.4.0-src.tar.gz
cd ta-lib
./configure --prefix=/usr
make
sudo make install

# 3. å¯åŠ¨ Dify
cd /Users/berton/Github/dify/docker
docker compose up -d
```

---

### Phase 2ï¼šå·¥ä½œæµé…ç½®

**1. åˆ›å»ºé‡åŒ–åˆ†æåº”ç”¨**
- è®¿é—® http://localhost
- åˆ›å»ºæ–°å·¥ä½œæµåº”ç”¨
- å‘½åä¸º"é‡åŒ–é‡‘è AI åˆ†æç³»ç»Ÿ"

**2. é…ç½®æ¨¡å‹æä¾›å•†**
- DeepSeek: ä»£ç ç”Ÿæˆã€ç­–ç•¥è§£é‡Š
- Qwen-Math: æ•°å­¦å»ºæ¨¡ã€é£é™©è®¡ç®—
- GLM-4.5V: å›¾è¡¨è¯†åˆ«ã€æŠ¥å‘Šåˆ†æ

**3. åˆ›å»ºå·¥ä½œæµ**
æŒ‰ç…§ä¸Šé¢çš„å·¥ä½œæµè®¾è®¡ï¼Œåˆ›å»ºä¸‰ä¸ªä¸»è¦å·¥ä½œæµï¼š
- æ™ºèƒ½æŠ€æœ¯åˆ†æ
- é‡åŒ–ç­–ç•¥å¼€å‘
- é£é™©ç®¡ç†ç³»ç»Ÿ

---

### Phase 3ï¼šæ•°æ®è¿æ¥

**1. é…ç½®æ•°æ®æº**
```python
# config.py
class Config:
    """æ•°æ®æºé…ç½®"""

    # Tushare
    TUSHARE_TOKEN = 'your_token_here'

    # æ•°æ®åº“
    DB_PATH = 'quant_data.db'

    # å®æ—¶æ•°æ®
    WEBSOCKET_URL = 'wss://api.example.com/stream'

    # API Keys
    ALPHA_VANTAGE_KEY = 'your_key'
    POLYGON_IO_KEY = 'your_key'
```

**2. åˆ›å»ºæ•°æ®ç®¡é“**
```python
# data_pipeline.py
class DataPipeline:
    """æ•°æ®é‡‡é›†ç®¡é“"""

    def __init__(self):
        self.storage = DataStorage()

    def update_daily_data(self, symbols):
        """æ›´æ–°æ—¥çº¿æ•°æ®"""
        for symbol in symbols:
            # è·å–æ•°æ®
            data = ak.stock_zh_a_hist(symbol=symbol)

            # å­˜å‚¨æ•°æ®
            self.storage.save_prices(data)

    def update_fundamentals(self, symbols):
        """æ›´æ–°åŸºæœ¬é¢æ•°æ®"""
        for symbol in symbols:
            # è·å–è´¢åŠ¡æ•°æ®
            data = ak.stock_financial_analysis_indicator(symbol)

            # å­˜å‚¨æ•°æ®
            self.storage.save_fundamentals(data)
```

---

## ä½¿ç”¨åœºæ™¯

### åœºæ™¯ 1ï¼šAè‚¡æŠ€æœ¯åˆ†æ

```
è¾“å…¥é…ç½®ï¼š
- è‚¡ç¥¨ä»£ç ï¼š600519.SHï¼ˆè´µå·èŒ…å°ï¼‰
- Kçº¿å›¾ï¼š[ä¸Šä¼ æˆªå›¾]
- åˆ†æå‘¨æœŸï¼šæ—¥çº¿
- åˆ†æé‡ç‚¹ï¼šè¶‹åŠ¿ + å½¢æ€

GLM-4.5V åˆ†æï¼š
- è¯†åˆ«ï¼šWåº•å½¢æ€å½¢æˆ
- çªç ´ï¼šé¢ˆçº¿ä½ Â¥1800
- æˆäº¤é‡ï¼šæ”¾é‡çªç ´
- è¶‹åŠ¿ï¼šä¸­æœŸä¸Šå‡è¶‹åŠ¿

DeepSeek è¡¥å……ï¼š
- æŠ€æœ¯æŒ‡æ ‡ï¼šMACDé‡‘å‰ï¼ŒRSI 58
- æ”¯æ’‘ä½ï¼šÂ¥1750ï¼Œé˜»åŠ›ä½ï¼šÂ¥1900
- äº¤æ˜“å»ºè®®ï¼šçªç ´åè¿½æ¶¨ï¼Œæ­¢æŸ Â¥1750

ç”ŸæˆçŸ¥è¯†å¡ç‰‡ï¼š
- Wåº•å½¢æ€åŸç†
- MACDæŒ‡æ ‡è§£è¯»
- æ­¢æŸè®¾ç½®æŠ€å·§
```

---

### åœºæ™¯ 2ï¼šå¤šå› å­ç­–ç•¥å¼€å‘

```
è¾“å…¥é…ç½®ï¼š
- ç­–ç•¥ç±»å‹ï¼šå¤šå› å­é€‰è‚¡
- è‚¡ç¥¨æ± ï¼šæ²ªæ·±300
- å› å­æ± ï¼šåŠ¨é‡ã€ä»·å€¼ã€è´¨é‡
- è°ƒä»“é¢‘ç‡ï¼šæœˆåº¦

Qwen-Math å»ºæ¨¡ï¼š
- å› å­å®šä¹‰ä¸å…¬å¼
- æ ‡å‡†åŒ–æ–¹æ³•ï¼ˆZ-scoreï¼‰
- åŠ æƒæ–¹æ¡ˆï¼ˆç­‰æƒ/ICåŠ æƒï¼‰
- é£é™©æ¨¡å‹ï¼ˆè¡Œä¸šä¸­æ€§ï¼‰

DeepSeek ç”Ÿæˆä»£ç ï¼š
- å› å­è®¡ç®—å‡½æ•°
- å› å­åˆæˆé€»è¾‘
- é€‰è‚¡ä¸æƒé‡åˆ†é…
- å›æµ‹æ¡†æ¶æ¥å£

å›æµ‹ç»“æœï¼ˆ3å¹´ï¼‰ï¼š
- å¹´åŒ–æ”¶ç›Šï¼š15.2%
- æœ€å¤§å›æ’¤ï¼š-12.5%
- å¤æ™®ç‡ï¼š1.05
- è¶…é¢æ”¶ç›Šï¼š8.3%

ç”ŸæˆçŸ¥è¯†å¡ç‰‡ï¼š
- å¤šå› å­æ¨¡å‹åŸç†
- IC/IRæŒ‡æ ‡æ¦‚å¿µ
- é£é™©æ¨¡å‹æ–¹æ³•
```

---

### åœºæ™¯ 3ï¼šç»„åˆé£é™©ç®¡ç†

```
è¾“å…¥é…ç½®ï¼š
- ç»„åˆæŒä»“ï¼š50åªè‚¡ç¥¨
- ç½®ä¿¡æ°´å¹³ï¼š95%
- æŒæœ‰æœŸï¼š10å¤©

Qwen-Math è®¡ç®—ï¼š
- VaR æ•°å­¦åŸç†
- ä¸‰ç§è®¡ç®—æ–¹æ³•
- åæ–¹å·®çŸ©é˜µä¼°è®¡
- è’™ç‰¹å¡æ´›æ¨¡æ‹Ÿè®¾è®¡

Python å®ç°ï¼š
- å†å²æ¨¡æ‹Ÿæ³• VaRï¼š-3.2%
- å‚æ•°æ³• VaRï¼š-3.5%
- è’™ç‰¹å¡æ´› VaRï¼š-3.4%
- CVaRï¼š-5.1%

é£é™©å½’å› ï¼š
- ç³»ç»Ÿæ€§é£é™©ï¼š70%
- è¡Œä¸šé£é™©ï¼š15%
- ç‰¹è´¨æ€§é£é™©ï¼š15%

å‹åŠ›æµ‹è¯•ï¼š
- 2008å±æœºæƒ…æ™¯ï¼š-25%
- 2020ç–«æƒ…æƒ…æ™¯ï¼š-18%
- æç«¯åˆ©ç‡æƒ…æ™¯ï¼š-12%

ç”ŸæˆçŸ¥è¯†å¡ç‰‡ï¼š
- VaR/CVaRæ¦‚å¿µ
- é£é™©å½’å› æ–¹æ³•
- å‹åŠ›æµ‹è¯•åŸç†
```

---

## æˆæœ¬åˆ†æ

### è¯¦ç»†æˆæœ¬åˆ†è§£

| ä»»åŠ¡ç±»å‹ | ä¸»ç”¨æ¨¡å‹ | è¾“å…¥tokens | è¾“å‡ºtokens | å•æ¬¡æˆæœ¬ | æœˆåº¦ä½¿ç”¨ | æœˆæˆæœ¬ |
|---------|---------|-----------|-----------|---------|---------|--------|
| å›¾è¡¨åˆ†æ | GLM-4.5V | 2000 | 1000 | Â¥0.03 | 20æ¬¡ | Â¥0.60 |
| æŠ€æœ¯åˆ†æ | DeepSeek | 1500 | 1000 | Â¥0.0035 | 50æ¬¡ | Â¥0.18 |
| ç­–ç•¥å»ºæ¨¡ | Qwen-Math | 3000 | 2000 | Â¥0.018 | 10æ¬¡ | Â¥0.18 |
| ä»£ç ç”Ÿæˆ | DeepSeek | 2000 | 3000 | Â¥0.008 | 15æ¬¡ | Â¥0.12 |
| é£é™©è®¡ç®— | Qwen-Math | 1500 | 1000 | Â¥0.005 | 10æ¬¡ | Â¥0.05 |
| **æ€»è®¡** | - | - | - | - | **105æ¬¡** | **Â¥1.13/æœˆ** |

### å¹´åº¦æˆæœ¬é¢„ä¼°

- **è½»åº¦ä½¿ç”¨**ï¼ˆæ¯å‘¨åˆ†æ2-3æ¬¡ï¼‰ï¼šÂ¥50-80/å¹´
- **ä¸­åº¦ä½¿ç”¨**ï¼ˆæ¯æ—¥åˆ†æ1-2æ¬¡ï¼‰ï¼šÂ¥150-200/å¹´
- **é‡åº¦ä½¿ç”¨**ï¼ˆä¸“ä¸šé‡åŒ–ç ”ç©¶ï¼‰ï¼šÂ¥500-800/å¹´

### æˆæœ¬å¯¹æ¯”

| æ–¹å¼ | æˆæœ¬/å¹´ | æ•°æ®è´¨é‡ | åˆ†ææ·±åº¦ | å®šåˆ¶åŒ– |
|------|--------|---------|---------|--------|
| Wind/åŒèŠ±é¡º | Â¥30,000+ | é«˜ | ä¸­ | ä½ |
| é‡åŒ–å¹³å° | Â¥100,000+ | é«˜ | é«˜ | ä¸­ |
| è‡ªç ”ç³»ç»Ÿ | Â¥500,000+ | è‡ªå®š | è‡ªå®š | é«˜ |
| **AIé‡åŒ–ç³»ç»Ÿ** | **Â¥100-800** | **é«˜** | **é«˜** | **æé«˜** |

---

## æœ€ä½³å®è·µ

### 1. æ•°æ®ç®¡ç†

- **æ•°æ®è´¨é‡æ£€æŸ¥**ï¼šç¼ºå¤±å€¼ã€å¼‚å¸¸å€¼ã€ä¸€è‡´æ€§
- **æ•°æ®å­˜å‚¨**ï¼šæ—¶åºæ•°æ®åº“ï¼ˆInfluxDBã€TimescaleDBï¼‰
- **æ•°æ®ç‰ˆæœ¬æ§åˆ¶**ï¼šDVCã€Delta Lake
- **å®æ—¶ç›‘æ§**ï¼šæ•°æ®å»¶è¿Ÿã€è¦†ç›–ç‡ç›‘æ§

### 2. æ¨¡å‹å¼€å‘

- **æ¨¡å—åŒ–è®¾è®¡**ï¼šå› å­è®¡ç®—ã€ç»„åˆæ„å»ºã€æ‰§è¡Œåˆ†ç¦»
- **å‚æ•°åŒ–é…ç½®**ï¼šé¿å…ç¡¬ç¼–ç 
- **ç‰ˆæœ¬ç®¡ç†**ï¼šGitæ ‡ç­¾è®°å½•æ¯ä¸ªç­–ç•¥ç‰ˆæœ¬
- **æ–‡æ¡£å®Œå–„**ï¼šæ¯ä¸ªå‡½æ•°çš„è¯¦ç»†æ³¨é‡Š

### 3. å›æµ‹éªŒè¯

- **æ ·æœ¬å¤–æµ‹è¯•**ï¼šé¿å…è¿‡æ‹Ÿåˆ
- **äº¤æ˜“æˆæœ¬**ï¼šè€ƒè™‘æ‰‹ç»­è´¹ã€æ»‘ç‚¹ã€å†²å‡»æˆæœ¬
- **æµåŠ¨æ€§çº¦æŸ**ï¼šå®é™…å¯äº¤æ˜“æ€§æ£€æŸ¥
- **ç¨³å¥æ€§æ£€éªŒ**ï¼šå‚æ•°æ•æ„Ÿæ€§åˆ†æ

### 4. é£é™©æ§åˆ¶

- **å¤šç»´åº¦é£æ§**ï¼šé£é™©é™é¢ã€æ­¢æŸã€åˆ†æ•£åŒ–
- **å®æ—¶ç›‘æ§**ï¼šç»„åˆæš´éœ²ã€æ æ†ã€VaR
- **å‹åŠ›æµ‹è¯•**ï¼šå®šæœŸæ¨¡æ‹Ÿæç«¯æƒ…æ™¯
- **å½’å› åˆ†æ**ï¼šæŒç»­è¿½è¸ªæ”¶ç›Š/é£é™©æ¥æº

### 5. çŸ¥è¯†ç§¯ç´¯

- **æ¯æ—¥å¤ä¹ **ï¼šAnkié‡åŒ–æ¦‚å¿µå¡ç‰‡
- **ç­–ç•¥æ€»ç»“**ï¼šæ¯æ¬¡å›æµ‹åçš„ç»éªŒæ•™è®­
- **é”™è¯¯è®°å½•**ï¼šå¤±è´¥æ¡ˆä¾‹åŠåŸå› åˆ†æ
- **å‰æ²¿è¿½è¸ª**ï¼šè®ºæ–‡ã€åšå®¢ã€ä¼šè®®

---

## è¿›é˜¶åŠŸèƒ½

### 1. æœºå™¨å­¦ä¹ ç­–ç•¥

```python
# LSTM ä»·æ ¼é¢„æµ‹
from tensorflow.keras.models import Sequential
from tensorflow.keras.layers import LSTM, Dense

def build_lstm_model(input_shape):
    """æ„å»ºLSTMæ¨¡å‹"""
    model = Sequential([
        LSTM(50, return_sequences=True,
             input_shape=input_shape),
        LSTM(50, return_sequences=False),
        Dense(25),
        Dense(1)
    ])

    model.compile(
        optimizer='adam',
        loss='mse'
    )

    return model

# è®­ç»ƒä¸é¢„æµ‹
model = build_lstm_model((X_train.shape[1], X_train.shape[2]))
model.fit(X_train, y_train, epochs=50, batch_size=32)

predictions = model.predict(X_test)
```

### 2. å¼ºåŒ–å­¦ä¹ äº¤æ˜“

```python
# DQN äº¤æ˜“agent
import stable_baselines3 as sb3
from stable_baselines3.common.vec_env import DummyVecEnv

from trading_env import TradingEnv  # è‡ªå®šä¹‰ç¯å¢ƒ

# åˆ›å»ºç¯å¢ƒ
env = TradingEnv(data)
env = DummyVecEnv([lambda: env])

# è®­ç»ƒDQN
model = sb3.DQN(
    "MlpPolicy",
    env,
    verbose=1
)

model.learn(total_timesteps=100000)

# æµ‹è¯•
obs = env.reset()
for _ in range(1000):
    action, _states = model.predict(obs)
    obs, rewards, done, info = env.step(action)
```

### 3. å› å­æŒ–æ˜è‡ªåŠ¨åŒ–

```python
# è‡ªåŠ¨å› å­å‘ç°
from sklearn.ensemble import RandomForestRegressor
from sklearn.feature_selection import mutual_info_regression

class AutoFactorMining:
    """è‡ªåŠ¨å› å­æŒ–æ˜"""

    def __init__(self):
        self.models = {}
        self.factor_importance = {}

    def generate_candidates(self, data):
        """ç”Ÿæˆå€™é€‰å› å­"""
        candidates = {
            'momentum_5d': data['close'].pct_change(5),
            'momentum_20d': data['close'].pct_change(20),
            'volatility_20d': data['close'].pct_change().rolling(20).std(),
            'volume_ratio': data['volume'] / data['volume'].rolling(20).mean(),
            # ... æ›´å¤šå€™é€‰å› å­
        }
        return pd.DataFrame(candidates)

    def evaluate_importance(self, factors, returns):
        """è¯„ä¼°å› å­é‡è¦æ€§"""
        mi_scores = mutual_info_regression(
            factors.fillna(0),
            returns
        )

        importance = pd.Series(
            mi_scores,
            index=factors.columns
        ).sort_values(ascending=False)

        return importance

    def select_factors(self, importance, top_n=10):
        """é€‰æ‹©æœ€ä¼˜å› å­"""
        return importance.head(top_n).index.tolist()
```

### 4. å®æ—¶ç›‘æ§ç³»ç»Ÿ

```python
# å®æ—¶é£é™©ç›‘æ§
import schedule
import time

class RiskMonitor:
    """å®æ—¶é£é™©ç›‘æ§ç³»ç»Ÿ"""

    def __init__(self, portfolio, limits):
        self.portfolio = portfolio
        self.limits = limits

    def check_var_limit(self):
        """æ£€æŸ¥VaRé™é¢"""
        current_var = self.portfolio.calculate_var()

        if current_var > self.limits['max_var']:
            self.alert(
                f"VaRè¶…é™ï¼å½“å‰: {current_var:.2%}, "
                f"é™é¢: {self.limits['max_var']:.2%}"
            )

    def check_concentration(self):
        """æ£€æŸ¥é›†ä¸­åº¦"""
        max_weight = self.portfolio.weights.max()

        if max_weight > self.limits['max_concentration']:
            self.alert(
                f"é›†ä¸­åº¦è¶…é™ï¼{max_weight:.2%} > "
                f"{self.limits['max_concentration']:.2%}"
            )

    def run(self):
        """è¿è¡Œç›‘æ§"""
        schedule.every(1).hour.do(self.check_var_limit)
        schedule.every(30).minutes.do(self.check_concentration)

        while True:
            schedule.run_pending()
            time.sleep(60)
```

---

## é™„å½•

### A. é‡åŒ–é‡‘èèµ„æº

**åœ¨çº¿è¯¾ç¨‹**ï¼š
- QuantConnect Academy
- Quantopian Lecturesï¼ˆå·²å½’æ¡£ï¼Œä½†å†…å®¹ä»æœ‰ä»·å€¼ï¼‰
- Financial Engineering Course (Columbia FE)

**ä¹¦ç±æ¨è**ï¼š
- ã€Šé‡åŒ–æŠ•èµ„ï¼šç­–ç•¥ä¸æŠ€æœ¯ã€‹- ä¸é¹
- ã€ŠActive Portfolio Managementã€‹- Grinold & Kahn
- ã€ŠOptions, Futures, and Other Derivativesã€‹- John Hull
- ã€ŠAlgorithmic Tradingã€‹- Ernie Chan

**å¼€æºé¡¹ç›®**ï¼š
- Backtrader: å›æµ‹æ¡†æ¶
- VectorBT: å¿«é€Ÿå›æµ‹
- QuantLib: å®šä»·åº“
- Zipline: Quantopianå¼€æºçš„å›æµ‹å¼•æ“

**æ•°æ®æº**ï¼š
- å…è´¹ï¼šTushareã€AkShareã€yfinance
- ä»˜è´¹ï¼šWindã€Bloombergã€Choice

---

### B. Anki ç‰Œç»„æ¨¡æ¿

```
Quantitative Finance (çˆ¶ç‰Œç»„)
â”œâ”€â”€ Concepts (åŸºç¡€æ¦‚å¿µ)
â”‚   â”œâ”€â”€ Market Microstructure (å¸‚åœºå¾®è§‚ç»“æ„)
â”‚   â”œâ”€â”€ Portfolio Theory (ç»„åˆç†è®º)
â”‚   â”œâ”€â”€ Derivatives (è¡ç”Ÿå“)
â”‚   â””â”€â”€ Risk Management (é£é™©ç®¡ç†)
â”œâ”€â”€ Models (å®šä»·æ¨¡å‹)
â”‚   â”œâ”€â”€ Black-Scholes (BSæ¨¡å‹)
â”‚   â”œâ”€â”€ Binomial Tree (äºŒå‰æ ‘)
â”‚   â”œâ”€â”€ Monte Carlo (è’™ç‰¹å¡æ´›)
â”‚   â””â”€â”€ Heston Model (éšæœºæ³¢åŠ¨ç‡)
â”œâ”€â”€ Strategies (ç­–ç•¥)
â”‚   â”œâ”€â”€ Momentum (åŠ¨é‡)
â”‚   â”œâ”€â”€ Mean Reversion (å‡å€¼å›å½’)
â”‚   â”œâ”€â”€ Statistical Arbitrage (ç»Ÿè®¡å¥—åˆ©)
â”‚   â””â”€â”€ Pairs Trading (é…å¯¹äº¤æ˜“)
â”œâ”€â”€ Indicators (æŠ€æœ¯æŒ‡æ ‡)
â”‚   â”œâ”€â”€ Trend (è¶‹åŠ¿)
â”‚   â”œâ”€â”€ Momentum (åŠ¨é‡)
â”‚   â”œâ”€â”€ Volatility (æ³¢åŠ¨ç‡)
â”‚   â””â”€â”€ Volume (æˆäº¤é‡)
â”œâ”€â”€ Code Snippets (ä»£ç ç‰‡æ®µ)
â”‚   â”œâ”€â”€ Factor Calculation (å› å­è®¡ç®—)
â”‚   â”œâ”€â”€ Backtesting (å›æµ‹)
â”‚   â”œâ”€â”€ Risk Metrics (é£é™©æŒ‡æ ‡)
â”‚   â””â”€â”€ Optimization (ä¼˜åŒ–)
â””â”€â”€ Formulas (æ•°å­¦å…¬å¼)
    â”œâ”€â”€ Derivation (æ¨å¯¼è¿‡ç¨‹)
    â”œâ”€â”€ Implementation (å®ç°)
    â””â”€â”€ Intuition (ç›´è§‚ç†è§£)
```

---

### C. æ›´æ–°æ—¥å¿—

- **v1.0** (2025-01-03): åˆå§‹ç‰ˆæœ¬ï¼ŒåŒ…å«å®Œæ•´çš„é‡åŒ–é‡‘èAIåˆ†æç³»ç»Ÿ

---

*æœ¬æ–‡æ¡£ç”± Claude Code + Happy è‡ªåŠ¨ç”Ÿæˆå’Œç»´æŠ¤*
*æœ€åæ›´æ–°ï¼š2025-01-03*
